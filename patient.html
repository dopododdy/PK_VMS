<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>PK_VMS ‚Äì Patient Detail</title>
  <style>
    body { font-family: Arial; background:#f4f6f8; margin:0; }
    .top-nav {
      background:#fff; padding:10px 20px;
      border-bottom:1px solid #ddd;
      display:flex; gap:10px;
    }
    .top-nav button {
      padding:6px 12px; border:none;
      border-radius:6px; cursor:pointer;
    }
    .card {
      background:#fff; max-width:900px;
      margin:20px auto; padding:20px;
      border-radius:10px;
    }
    .row {
      display:grid;
      grid-template-columns: repeat(auto-fit,minmax(200px,1fr));
      gap:10px;
    }
    .label { font-weight:bold; color:#555; }
  </style>
</head>
<body>

<div class="top-nav">
  <button onclick="history.back()">‚¨Ö Back</button>
  <button onclick="location.href='index.html'">üè† Home</button>
</div>

<div class="card">
  <h2>üê∂ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢</h2>
  <div class="row">
    <div><div class="label">OPD</div><div id="opdNo"></div></div>
    <div><div class="label">‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏±‡∏ï‡∏ß‡πå</div><div id="petName"></div></div>
    <div><div class="label">‡πÄ‡∏û‡∏®</div><div id="sex"></div></div>
    <div><div class="label">‡∏ó‡∏≥‡∏´‡∏°‡∏±‡∏ô</div><div id="neuter"></div></div>
    <div><div class="label">‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á</div><div id="owner"></div></div>
    <div><div class="label">‡πÇ‡∏ó‡∏£</div><div id="phone"></div></div>
  </div>

  <div class="label">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</div>
  <div id="note"></div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyByr7W7FgP6FyNmy7yZw6vccFP7OUweZvc",
    authDomain: "pk-vms.firebaseapp.com",
    projectId: "pk-vms"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  const id = new URLSearchParams(location.search).get("id");
  if (!id) alert("‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•");

  db.collection("patients").doc(id).get().then(doc => {
    if (!doc.exists) return;
    const p = doc.data();
    opdNo.innerText = p.opdNo || "";
    petName.innerText = p.petName || "";
    sex.innerText = p.sex || "";
    neuter.innerText = p.neuterStatus || "";
    owner.innerText = p.ownerName || "";
    phone.innerText = p.phone || "";
    note.innerText = p.importantNote || "";
  });
</script>

</body>
</html>
